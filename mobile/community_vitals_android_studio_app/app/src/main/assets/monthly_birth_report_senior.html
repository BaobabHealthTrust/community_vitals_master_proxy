<html>
<head>
    <title>CVR</title>
    <link rel="stylesheet" type="text/css" href="css/main.css" />

    <script type="text/javascript" src="js/md5.js"></script>
    <script type="text/javascript" src="js/vocab.js"></script>
    <script type="text/javascript" src="js/datasrc.js"></script>
    <script type="text/javascript" src="js/main.js" defer></script>
    <script type="text/javascript" src="js/google.fastbutton.js"></script>

    <script type="text/javascript" defer>
        <!--

        // setTimeout("loadPage('spec/add_person.spec')", 200);

        function load(){


            new FastButton(document.getElementById('home'), function() {
                window.location = "index.html";
            });

            var mode = Android.getPref("dde_mode");

            if (mode == 'gvh')
            {
                document.getElementById('ta').innerHTML = Android.getPref("ta");
                document.getElementById('gvh').innerHTML = Android.getPref("gvh");
                document.getElementById('logo').setAttribute('rowspan', 3)
            }

            else if (mode == 'ta')
            {
                document.getElementById('ta').innerHTML = Android.getPref("ta");
                document.getElementById('gvh_row').style.display = 'none';
                document.getElementById('logo').setAttribute('rowspan', 2)
            }
            localise()
            document.getElementById('title').innerHTML += ( " " + Android.getPref("display_month"));
            var data= Android.getSeniorMonthlyBirthReport(Android.getPref("report_month"));
            data = JSON.parse(data);
            add_rows(data);

            //__$("parent").innerHTML = "";
        }

        function add_rows(data){
            var table =document.getElementById('details');

            for(var i = 0; i < data.length; i++)
            {
                var row_count = table.rows.length;
                var row = table.insertRow(row_count);
                var village_cell = row.insertCell(0);
                village_cell.innerHTML = data[i]["village"];
                var male_cell = row.insertCell(1);
                male_cell.innerHTML = data[i]["male"];
                var female_cell = row.insertCell(2);
                female_cell.innerHTML = data[i]["female"];
                var alive_cell = row.insertCell(3);
                alive_cell.innerHTML = data[i]["alive"];
                var dead_cell = row.insertCell(4);
                dead_cell.innerHTML = data[i]["dead"];
                var transfer_cell = row.insertCell(5);
                transfer_cell.innerHTML = data[i]["transfer"];
                var total_cell = row.insertCell(6);
                total_cell.innerHTML = data[i]["total"];
            }

        }

        function localise()
        {
            var fields = ["ta_header","gvh_header","title","births","trans", "dead",
                          "alive", "female","male", "village", "survival", "gender"];

            for (var i =0; i < fields.length; i++)
            {
                document.getElementById(fields[i]).innerHTML = search(document.getElementById(fields[i]).innerHTML.trim());
            }

        }

        function localResize() {

            if (__$("parent")) {

                __$("parent").style.height = (window.innerHeight - 155) + "px";

            }

        }

        //-->
    </script>

    <style type="text/css">
        tr.heading{
            background-color: silver;
            height: 45px;
            font-size: 20px;
            text-align: center;
        }

        .heading td{
            border:0px solid white !important;
        }

        tr{
            font-size: 15px;
        }

        table.data{
        }

        .data td{
            border: 0.1em solid silver;
            font-size: 17px;
            text-align:center;
        }

    </style>

</head>
<body onload="load(); localResize(); " onresize="localResize()" style="margin: 0px; padding: 0px;">

<div class="table" style="border-spacing: 0px; width: 100%;">
    <div class="row">
        <div class="cell center" style="position: relative; width: 100%; height: 80%;">
            <div id="header" style="background-color: #f1f1f1; min-height: 80px;
              width: 100%; margin: 0px; margin-top: -5px; padding: 0px;
              border:solid black; border-width: 0px 0px 0.4em 0px; ">
                <table style="width: 100%; height: 70px" >
                    <tr>
                        <td id='logo' style="width: 100px;text-align: center" rowspan="4">
                            <img src="images/baobab.png" style="height: 70px;width:90px;">
                        </td>
                        <td id="title" style="vertical-align: top; font-size: 15px; font-weight: bold;" colspan="3">
                            Monthly Birth Report</td>
                        <td>&nbsp;</td><td>&nbsp;</td>
                    </tr>
                    <tr>
                        <td style="font-weight: bold;width:160px;font-size: 13px" id='ta_header'>Traditional Authority</td>
                        <td style="width:5px;font-size: 13px">:</td>
                        <td id='ta' style="font-size: 13px"></td>
                    </tr>
                    <tr id= 'gvh_row'>
                        <td style="font-weight: bold;font-size: 13px" id='gvh_header'>Group Village Headman</td>
                        <td style="font-size: 13px">:</td>
                        <td id='gvh' style="font-size: 13px"></td>
                    </tr>

                </table>
            </div>
            <div id="parent" style="background-color: #f1f1f1;
              width: 100%; margin: 0px; margin-top: -5px; padding: 0px;overflow: auto;">

                <table class="data" id="details" style='width: 100%'>
                   <tr class='heading'>
                       <td style="width:20%">&nbsp;</td>
                       <td style="width:30%" colspan='2' id="gender">Gender</td>
                       <td style="width:35%"colspan='3' id="survival">Population Survival Statistics</td>
                       <td>&nbsp;</td>
                   </tr>
                    <tr class='heading'>
                        <td id="village">Village</td>
                        <td id="male">Male</td>
                        <td id="female">Female</td>
                        <td id="alive">Alive</td>
                        <td id="dead">Dead</td>
                        <td id="trans">Transferred</td>
                        <td id="births">New Births</td>
                    </tr>
                </table>

            </div>

            <div class="nav" style="position: absolute; bottom: 0px; border: 1px #fff solid; height: 64px;
              width: 100%; background-color: #666; margin: 0px; margin-bottom: -70px;
              margin-left: -5px; ">

                <a id="home" style="float: left;">
                    <img src="images/home.png" alt="Home" style="margin: 0px;
                  margin-left: 15px;" height="60" />
                </a>

            </div>
        </div>
    </div>
</div>
</body>
</html>
